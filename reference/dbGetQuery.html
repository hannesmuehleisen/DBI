<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Send query, retrieve results and then clear result set — dbGetQuery • DBI</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">DBI</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/backend.html">Implementing a new backend</a>
    </li>
    <li>
      <a href="../articles/DBI-1.html">A Common Database Interface (DBI)</a>
    </li>
    <li>
      <a href="../articles/DBI-proposal.html">A Common Interface to Relational Databases from R and S -- A Proposal</a>
    </li>
    <li>
      <a href="../articles/spec.html">DBI specification</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Send query, retrieve results and then clear result set</h1>
    </div>

    
    <p>Returns the result of a query as a data frame.
<code>dbGetQuery()</code> comes with a default implementation
(which should work with most backends) that calls
<code><a href='dbSendQuery.html'>dbSendQuery()</a></code>, then <code><a href='dbFetch.html'>dbFetch()</a></code>, ensuring that
the result is always free-d by <code><a href='dbClearResult.html'>dbClearResult()</a></code>.</p>
    

    <pre class="usage"><span class='fu'>dbGetQuery</span>(<span class='no'>conn</span>, <span class='no'>statement</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>conn</th>
      <td><p>A <a href='DBIConnection-class.html'>DBIConnection</a> object, as returned by
<code><a href='dbConnect.html'>dbConnect()</a></code>.</p></td>
    </tr>
    <tr>
      <th>statement</th>
      <td><p>a character string containing SQL.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other parameters passed on to methods.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>dbGetQuery()</code> always returns a data.frame
with as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
An error is raised when issuing a query over a closed
or invalid connection,
if the syntax of the query is invalid,
or if the query is not a non-<code>NA</code> string.
If the <code>n</code> argument is not an atomic whole number
greater or equal to -1 or Inf, an error is raised,
but a subsequent call to <code>dbGetQuery()</code> with proper <code>n</code> argument succeeds.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This method is for <code>SELECT</code> queries only.  Some backends may
support data manipulation statements through this method for compatibility
reasons.  However, callers are strongly advised to use
<code><a href='dbExecute.html'>dbExecute()</a></code> for data manipulation statements.</p>
    
    <h2 class="hasAnchor" id="implementation-notes"><a class="anchor" href="#implementation-notes"></a>Implementation notes</h2>

    
    <p>Subclasses should override this method only if they provide some sort of
performance optimization.</p>
    
    <h2 class="hasAnchor" id="specification"><a class="anchor" href="#specification"></a>Specification</h2>

    
    <p>Fetching multi-row queries with one
or more columns be default returns the entire result.
A value of Inf for the <code>n</code> argument is supported
and also returns the full result.
If more rows than available are fetched, the result is returned in full
without warning.
If zero rows are fetched, the columns of the data frame are still fully
typed.
Fetching fewer rows than available is permitted,
no warning is issued.</p>
<p>A column named <code>row_names</code> is treated like any other column.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>For updates: <code><a href='dbSendStatement.html'>dbSendStatement()</a></code> and <code><a href='dbExecute.html'>dbExecute()</a></code>.</p>
<p>Other DBIConnection generics: <code><a href='DBIConnection-class.html'>DBIConnection-class</a></code>,
  <code><a href='dbDataType.html'>dbDataType</a></code>, <code><a href='dbDisconnect.html'>dbDisconnect</a></code>,
  <code><a href='dbExecute.html'>dbExecute</a></code>, <code><a href='dbExistsTable.html'>dbExistsTable</a></code>,
  <code><a href='dbGetException.html'>dbGetException</a></code>, <code>dbGetInfo</code>,
  <code><a href='dbIsValid.html'>dbIsValid</a></code>, <code><a href='dbListFields.html'>dbListFields</a></code>,
  <code><a href='dbListResults.html'>dbListResults</a></code>, <code><a href='dbListTables.html'>dbListTables</a></code>,
  <code><a href='dbReadTable.html'>dbReadTable</a></code>, <code><a href='dbRemoveTable.html'>dbRemoveTable</a></code>,
  <code><a href='dbSendQuery.html'>dbSendQuery</a></code>, <code><a href='dbSendStatement.html'>dbSendStatement</a></code>,
  <code><a href='dbWriteTable.html'>dbWriteTable</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>con</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dbConnect.html'>dbConnect</a></span>(<span class='kw pkg'>RSQLite</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/RSQLite/topics/SQLite'>SQLite</a></span>(), <span class='st'>":memory:"</span>)

<span class='fu'><a href='dbWriteTable.html'>dbWriteTable</a></span>(<span class='no'>con</span>, <span class='st'>"mtcars"</span>, <span class='no'>mtcars</span>)
<span class='fu'>dbGetQuery</span>(<span class='no'>con</span>, <span class='st'>"SELECT * FROM mtcars"</span>)</div><div class='output co'>#&gt;     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; 1  21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3  22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4  21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5  18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6  18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
#&gt; 7  14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
#&gt; 8  24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
#&gt; 9  22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
#&gt; 10 19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
#&gt; 11 17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
#&gt; 12 16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
#&gt; 13 17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
#&gt; 14 15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
#&gt; 15 10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
#&gt; 16 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
#&gt; 17 14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
#&gt; 18 32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
#&gt; 19 30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
#&gt; 20 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&gt; 21 21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&gt; 22 15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
#&gt; 23 15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
#&gt; 24 13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
#&gt; 25 19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
#&gt; 26 27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
#&gt; 27 26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#&gt; 28 30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#&gt; 29 15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
#&gt; 30 19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
#&gt; 31 15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
#&gt; 32 21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</div><div class='input'>
<span class='fu'><a href='dbDisconnect.html'>dbDisconnect</a></span>(<span class='no'>con</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#implementation-notes">Implementation notes</a></li>

      <li><a href="#specification">Specification</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by R Special Interest Group on Databases (R-SIG-DB), <a href='http://hadley.nz'>Hadley Wickham</a>, Kirill Müller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
